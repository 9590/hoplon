<html>
  <head>
    <script type="text/hlisp">
      (ns hlex.ex1
        (:use
          [flapjax.core :only [sync-e]]
          [mytest.ui    :only [make-radio make-tabs]])
        (:use-macros
          [hlisp.macros :only [def-values deftpl tpl]])
      )

      (defn specialtab [t1 c1 t2 c2]
        (let [[activetab trig1 cont1 trig2 cont2]
              (make-tabs "one" li div "one" li div "two")]
          (with-meta
            (div {:class "specialtabs"}
              (ul {:class "tabcontrol"}
                (trig1 t1)
                (trig2 t2))
              (div {:class "tabcontent"}
                (cont1 (p c1))
                (cont2 (p c2))))
            {:active activetab}) ))

      (def tb1 (specialtab "tab1" "content for 1" "tab2" "content for 2"))
      (def tb2 (specialtab "tab3" "content for 3" "tab4" "content for 4"))

      (defn sync-tabthings [thing1 thing2]
        (sync-e (:active (meta thing1)) (:active (meta thing2))))

      (sync-tabthings tb1 tb2)
    </script>
  </head>

  <body>

    <h1>hello world</h1>

    <script type="text/hlisp">
      (div {:id "scripttag"} (p "hello")) 
    </script>

    <tb1/>

    <tb2/>

  </body>

  <!--__HLISP__-->
</html>
